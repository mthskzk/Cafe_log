<div class="post-partial">
  <% if posts.exists? %>
    <% posts.each do |post1| %>
      <% if post1.status == false or (post1.status == true and post1.customer == current_customer ) %>
        <li>
          <% post1.images.each do |image| %>
            <%= image_tag(image, width:100) %>
          <% end %>
          <%= link_to customer_path(post1.customer.id) do %>
            <%= image_tag post1.customer.get_profile_image, class: "rounded-circle", size:'50x50' %>
            <%= post1.customer.name %>
          <% end %>
          <%= post1.body %>
          <!--投稿に紐づくタグを表示-->
          タグ:
          <% post1.tags.each do |tag| %>
              <%= link_to tag.name,  searches_search_sns_path(content: tag.name, model:"tag", method: "perfect") %>
          <% end %>

          <%= link_to "コメントする", post_post_comments_path(post1.id) %>
          <!--コメントがあるとき件数を表示-->
          <% if post1.post_comments.exists? %>
            <%= link_to post_post_comments_path(post1.id) do %>
              コメント<%= post1.post_comments.count %>件
            <% end %>
          <% end %>
          <!--いいね機能-->
          <div id="favorite_btn_<%= post1.id %>">
            <%= render "public/favorites/btn", post1: post1 %>
          </div>
          <div id="favorite_counter_<%= post1.id %>">
            <%= render "public/favorites/counter", post1: post1 %>
          </div>
          <!--自分の投稿の時は編集・削除ができる-->
          <% if post1.customer == current_customer %>
            <%= link_to '編集する', edit_post_path(post1.id) %>
            <%= link_to '削除', post_path(post1.id), method: :delete, data: { confirm: '削除してよろしいですか?' } %>
          <% end %>
        </li>
      <% else %>
        <!--投稿のステータスが非公開かつログインユーザーと違うユーザーの投稿は表示しない-->
      <% end %>
    <% end %>
  <% else %>
    <li>
      まだ投稿されてません
    </li>
  <% end %>
</div>